<link rel="stylesheet" href="/css/myPost.css">;

<div class="container">
    {{!-- Published section --}}
    <h2>Published</h2>
    {{#if posts}}
    <div class="all_posts">
        <p>You have <strong>{{this.total_posts}} posts</strong> in total.</p>
        {{#each posts}}
        <div class="each_posts">
                <div class="each-posts-content">
                    <h3 id="post_title">{{this.title}}</h3>
                    <p id="post_publish_time"><strong>Published on </strong>{{this.date_of_publish}}</p>
                    <div id="post_content">
                        <p>{{{this.content_html}}}</p>
                    </div>
                    <div class="each-posts-links">
                    <a href="/editArticle/{{this.article_id}}">Edit</a>
                    {{#if tags}}
                    {{#each tags}}
                    <p id="tag">{{this.post_tag}}</p>
                    {{/each}}
                    {{/if}}
                    <a href="/article/{{posts.article_id}}">Read more</a>
                    </div>
                </div>
                <div class="each-posts-img">
                    <img src="/images/article-images/thumbnails/{{this.image}}" alt="{{this.image}}" id="post_img"
                        width="200px">
                </div>
        </div>
        {{/each}}
    </div>
    {{else}}
    <p>You have no posts</p>
    {{/if}}

    {{!-- Responses section only if user received them --}}
    <h2>Responses</h2>
    {{#if responses}}
    <div class="response">
        <p>You have <strong>{{this.total_responses}}</strong> responses in total.</p>
        <ul>
            {{#each responses}}
            <div class="each_responses">
                <img src="/images/icon_path" alt="user avatar" id="user_avatar" width="20px">
                <p id="username"><strong>{{this.commentor_fname}} {{this.commentor_lname}}</strong></p>
                <p><strong>Replied on </strong>{{this.time_of_comment}}</p>
                <p><strong>Articles:</strong> {{this.article_title}}</p>
                <p><strong>Comment: </strong>{{this.content}}</p>
                {{#if replies}}
                {{#each replies}}
                <div>
                    <img src="/images/icon_path" alt="user avatar" id="user_avatar" width="20px">
                    <p id="username"><strong>{{this.commentor_fname}} {{this.commentor_lname}}</strong></p>
                    <p><strong>Replied on </strong>{{this.time_of_comment}}</p>
                    <p><strong>Replies: </strong>{{this.content}}</p>
                </div>
                {{/each}}
                {{/if}}
                <a href="/reply">Reply</a>
                <a href="/deleteComment/{{this.id}}">
                    <button>Delete Comment</button>
                </a>
            </div>
            {{/each}}
        </ul>
    </div>
    {{else}}
    <p>You have no responses</p>
    {{/if}}
</div>

